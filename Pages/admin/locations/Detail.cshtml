@page
@model MVCRealEstate.Pages.admin.locations.DetailModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
	ViewData["Title"] = "Detail de l'adresse";
	Layout = "~/Pages/Shared/_AdminLayout.cshtml";
}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
<div class="col-md-12">
	<ul class="nav nav-pills-a nav-pills mb-3 section-t3" id="pills-tab" role="tablist">
		<li class="nav-item">
			<a class="nav-link active" id="pills-video-tab" data-toggle="pill" href="#pills-video" role="tab"
			   aria-controls="pills-video" aria-selected="true">Localisation</a>
		</li>
	</ul>

	<div id="map-detail"  style="width:100%; height:500px">
	</div>
	<a asp-page="./Index" class="btn btn-secondary">Retour à la liste</a>
	<a asp-page="./Edit" asp-route-id="@Model.Location.LocationId" class="btn btn-primary">Modifier</a>
	<!-- Bouton de suppression -->
	<form method="post" asp-page-handler="Delete" asp-route-id="@Model.Location.LocationId" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cette offre?');">
		<button type="submit" class="btn btn-danger">Supprimer</button>
	</form>
</div>

@section Scripts {
	<!-- Inclusion de Leaflet.js via CDN -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"  />

	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

	<script>
		var map = L.map('map-detail').setView([@Model.Location.latitude, @Model.Location.longitude], 13);

		L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(map);

		L.marker([@Model.Location.latitude, @Model.Location.longitude]).addTo(map)
			.bindPopup('<b>Adresse:</b> @Model.Location.Address<br><b>Ville:</b> @Model.Location.City')
			.openPopup();
	</script>
}
